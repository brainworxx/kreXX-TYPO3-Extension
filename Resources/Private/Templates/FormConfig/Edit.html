<f:layout name="BackendSave"/>

/**
 * Renders the configuration form, for the frontend editing of the settings.
 *
 * @var array {_all}
 *   Complete access to all variables.
 */
<f:section name="main">
    <f:form id="editconfig" action="save" >
        <h1><f:translate key="editfeconfig.headline" /></h1>
        <table border="0" class="krexx-config">
            <tr>
                <th colspan="3"><b><f:translate key="editfeconfig.help.headline" /></b></th>
            </tr>
            <tr>
                <td><f:translate key="full" /></td>
                <td colspan="2"><f:translate key="full.help" /></td>
            </tr>
            <tr>
                <td><f:translate key="display" /></td>
                <td colspan="2"><f:translate key="display.help" /></td>
            </tr>
            <tr>
                <td><f:translate key="none" /></td>
                <td colspan="2"><f:translate key="none.help" /></td>
            </tr>
            <tr><td colspan="3">&nbsp;</td></tr>

            <tr><th colspan="3"><b><f:translate key="subhead.output" /></b></th></tr>
            <f:render section="dropdown" arguments="{name: 'disabled',                options: data.settings, value: value.output.disabled,                 useFactorySettings: data.factory.disabled               }" />
            <f:render section="noedit"   arguments="{name: 'iprange'                                                                                                                                                }" />
            <f:render section="dropdown" arguments="{name: 'skin',                    options: data.settings, value: value.output.skin,                     useFactorySettings: data.factory.skin                   }" />
            <f:render section="noedit"   arguments="{name: 'destination'                                                                                                                                            }" />
            <f:render section="noedit"   arguments="{name: 'maxfiles'                                                                                                                                               }" />
            <tr><td colspan="3">&nbsp;</td></tr>

            <tr><th colspan="3"><b><f:translate key="subhead.runtime" /></b></th></tr>
            <f:render section="dropdown" arguments="{name: 'detectAjax',              options: data.settings, value: value.runtime.detectAjax,              useFactorySettings: data.factory.detectAjax             }" />
            <f:render section="dropdown" arguments="{name: 'level',                   options: data.settings, value: value.runtime.level,                   useFactorySettings: data.factory.level                  }" />
            <f:render section="dropdown" arguments="{name: 'maxCall',                 options: data.settings, value: value.runtime.maxCall,                 useFactorySettings: data.factory.maxCall                }" />
            <f:render section="dropdown" arguments="{name: 'memoryLeft',              options: data.settings, value: value.runtime.memoryLeft,              useFactorySettings: data.factory.memoryLeft             }" />
            <f:render section="dropdown" arguments="{name: 'maxRuntime',              options: data.settings, value: value.runtime.maxRuntime,              useFactorySettings: data.factory.maxRuntime             }" />
            <f:render section="dropdown" arguments="{name: 'useScopeAnalysis',        options: data.settings, value: value.runtime.useScopeAnalysis,        useFactorySettings: data.factory.useScopeAnalysis       }" />
            <tr><td colspan="3">&nbsp;</td></tr>

            <tr><th colspan="3"><b><f:translate key="subhead.properties" /></b></th></tr>
            <f:render section="dropdown" arguments="{name: 'analyseProtected',        options: data.settings, value: value.properties.analyseProtected,     useFactorySettings: data.factory.analyseProtected       }" />
            <f:render section="dropdown" arguments="{name: 'analysePrivate',          options: data.settings, value: value.properties.analysePrivate,       useFactorySettings: data.factory.analysePrivate         }" />
            <f:render section="dropdown" arguments="{name: 'analyseConstants',        options: data.settings, value: value.properties.analyseConstants,     useFactorySettings: data.factory.analyseConstants       }" />
            <f:render section="dropdown" arguments="{name: 'analyseTraversable',      options: data.settings, value: value.properties.analyseTraversable,   useFactorySettings: data.factory.analyseTraversable     }" />
            <tr><td colspan="3">&nbsp;</td></tr>

            <tr><th colspan="3"><b><f:translate key="subhead.methods" /></b></th></tr>
            <f:render section="dropdown" arguments="{name: 'analyseProtectedMethods', options: data.settings, value: value.methods.analyseProtectedMethods, useFactorySettings: data.factory.analyseProtectedMethods}" />
            <f:render section="dropdown" arguments="{name: 'analysePrivateMethods',   options: data.settings, value: value.methods.analysePrivateMethods,   useFactorySettings: data.factory.analysePrivateMethods  }" />
            <f:render section="dropdown" arguments="{name: 'analyseGetter',           options: data.settings, value: value.methods.analyseGetter,           useFactorySettings: data.factory.analyseGetter          }" />
            <f:render section="noedit"   arguments="{name: 'debugMethods'                                                                                                                                           }" />
            <tr><td colspan="3">&nbsp;</td></tr>

            <tr><th colspan="3"><b><f:translate key="subhead.backtrace" /></b></th></tr>
            <f:render section="dropdown" arguments="{name: 'maxStepNumber',           options: data.settings, value:value.backtrace.maxStepNumber,          useFactorySettings: data.factory.maxStepNumber          }" />
            
        </table>
    </f:form>
</f:section>

/**
 * Renders a dropdown with the possible values.
 *
 * @var string {name}
 *   The name of the dropdown.
 * @var array {options}
 *   The options for the dropdown.
 * @var string {value}
 *   The current value of the dropdown.
 * @var boolean {useFactorySettings}
 *   Are we using factory settings here?
 */
<f:section name="dropdown">
    <tr>
        <td><label for="{name}"><f:translate key="label.{name}" /></label></td>
        <td><f:form.select id="{name}" name="output[{name}]" options="{options}" value="{value}" /></td>
        <td class="cbx"><f:form.checkbox id="factory.{name}" name="factory" checked="{useFactorySettings}" value="1" /><label for="factory.{name}"><f:translate key="factory.settings" /></label></td>
    </tr>
</f:section>

/**
 * Renders the "This setting is not editable on the frontend." part.
 *
 * @var string {name}
 *   The name of the setting, used for the language key.
 */
<f:section name="noedit">
    <tr><td><f:translate key="label.{name}" /></td><td colspan="2"><f:translate key="logging.noteditable"/></td></tr>
</f:section>